---
identity_service_name: "identity"
identity_compose_dir: "{{ docker_config_dir }}/{{ identity_service_name }}"
# –û–±—â–∞—è –ø–∞–ø–∫–∞ –¥–∞–Ω–Ω—ã—Ö, –≤–Ω—É—Ç—Ä–∏ –±—É–¥—É—Ç /lldap, /pocketid
identity_data_dir: "{{ docker_data_dir }}/{{ identity_service_name }}"

# ==========================================
# LLDAP Configuration
# ==========================================
identity_lldap_image: "lldap/lldap:latest"
identity_lldap_domain: "ldap.{{ base_domain }}"
identity_lldap_port_http: 17170
identity_lldap_port_ldap: 3890
identity_lldap_base_dn: "dc=ziix,dc=ru"

# Admin & Secrets (from Vault)
identity_lldap_admin_dn: "{{ vault_lldap_admin_login }}"
identity_lldap_admin_pass: "{{ vault_lldap_admin_password }}"
identity_lldap_key_seed: "{{ vault_lldap_key_seed }}"
identity_lldap_jwt_secret: "{{ vault_lldap_jwt_secret }}"

# ==========================================
# PocketID Configuration
# ==========================================
identity_pocketid_image: "ghcr.io/pocket-id/pocket-id:v1"
identity_pocketid_domain: "auth.{{ base_domain }}"
identity_pocketid_port: "1411"
identity_pocketid_puid: "{{ default_puid }}"
identity_pocketid_pgid: "{{ default_pgid }}"
identity_pocketid_trust_proxy: "true"
identity_pocketid_maxmind_license_key: ""

# üî• –í–ê–ñ–ù–û: –û—Ç–∫–ª—é—á–∞–µ–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ UI, —á—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ ENV
identity_pocketid_ui_config_disabled: "true"

# LDAP Integration Settings
# –£–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –ø–∞–ø–∫—É –¥–ª—è –ø–æ–∏—Å–∫–∞ –ª—é–¥–µ–π, –∏–Ω–∞—á–µ –Ω–µ –Ω–∞–π–¥–µ—Ç
identity_pocketid_ldap_base: "ou=people,{{ identity_lldap_base_dn }}"
identity_pocketid_ldap_admin_group: "lldap_admin"

# Mappings (–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –∏—Å–ø–æ–ª—å–∑—É–µ–º 'uid', —Ç–∞–∫ –Ω–∞–¥–µ–∂–Ω–µ–µ –¥–ª—è LLDAP)
identity_pocketid_ldap_attr_user_uid: "uid"
identity_pocketid_ldap_attr_user_username: "uid"
identity_pocketid_ldap_attr_user_email: "mail"
identity_pocketid_ldap_attr_user_firstname: "givenName"
identity_pocketid_ldap_attr_user_lastname: "sn"
identity_pocketid_ldap_attr_user_picture: "jpegPhoto"
identity_pocketid_ldap_attr_group_member: "member"
# –î–ª—è –≥—Ä—É–ø–ø —Ç–æ–∂–µ –ª—É—á—à–µ uid –∏–ª–∏ cn
identity_pocketid_ldap_attr_group_uid: "cn"
identity_pocketid_ldap_attr_group_name: "cn"

# ==========================================
# TinyAuth Configuration
# ==========================================
identity_tinyauth_image: "ghcr.io/steveiliop56/tinyauth:v4"
identity_tinyauth_domain: "tinyauth.{{ base_domain }}"
identity_tinyauth_port: "3000"
identity_tinyauth_auto_redirect: true

# Secrets (from Vault)
identity_tinyauth_client_id: "{{ vault_tinyauth_pocketid_client_id }}"
identity_tinyauth_client_secret: "{{ vault_tinyauth_pocketid_client_secret }}"

# OAuth URLs
identity_tinyauth_pocketid_public_url: "https://{{ identity_pocketid_domain }}"
identity_tinyauth_pocketid_internal_url: "http://pocketid:1411"
